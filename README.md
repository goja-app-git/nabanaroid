# nabanaroid
菜花の思考に基づいて2択を決定してくれるはずのゴミアプリ


＊＊＊＊＊＊星野がこれからやること＊＊＊＊＊＊

使い方（迷子にならない版）
	1.	菜花が1500問完了 → LINEで星野に **暗号（数字とドット）**が届く
	2.	星野は /model/ を開く（暗号貼り専用）
	3.	貼って「保存」
	4.	本体（/）に戻って比較物A/B → 決断

⸻

画像追加の流れ（スマホで作ってもOK）
	1.	docs/img/idle/ に待機画像を1枚入れる（名前なんでもOK、jpg/png/jpeg何でもOK）
	2.	docs/img/angry/ に怒り画像を1枚入れる
	3.	docs/img/nabana/ に菜花ロイド画像を複数入れる
	4.	docs/img/manifest.json に「入れたファイル名」を追記する（ここだけ）

＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊



暗号貼り付け用のPINは0514



-----アプリの概要-----

心理テストと「菜花ロイド」の関係（全体像）

本システムは 2つのアプリで構成される。
	•	①心理テスト（菜花モデル生成アプリ）
菜花が1500問に回答し、意思決定傾向を数値化して **1つの文字列（暗号）**として出力する。
	•	②菜花ロイド（推論アプリ）
星野が暗号をセットすると、以後はサーバ不要で、入力された比較対象A/Bに対して 菜花っぽい選択を推論して決断する。

重要なのは、②菜花ロイドは「心理テストの回答ログ」を直接持たない点である。
持つのは **暗号から復号された“菜花の重み（モデル）”**のみで、推論は端末内で完結する。

⸻

データの流れ（サーバ不要・ローカル完結）
	1.	菜花が心理テスト1500問を解く
	2.	心理テスト側で回答を集計して「菜花モデル（重み）」を生成
	3.	モデルを暗号化して 数字とドットだけの長い文字列を出力
	4.	菜花はその文字列をLINEで星野に送る（意味は読めない）
	5.	星野が菜花ロイドの「暗号設定ページ」に貼り付け保存
	6.	菜花ロイドが端末内で復号し、モデルを localStorage に保存
	7.	以後は、A/Bを入力して「決断」するだけで菜花っぽい推論が走る

⸻

役割分担（何がどこで起きるか）

心理テスト側（学習・モデル化）
	•	やること：
	•	1500問の回答から タグごとの嗜好の重みを推定
	•	例：heavy_meal（こってり/ガッツリ）を好む度合い、cheap（節約）を選びやすい度合い…など
	•	出力：
	•	暗号文字列（数字とドットのみ）
	•	これは「復号鍵を知らない人（菜花本人含む）には読めない」形にして、コピペしやすい形式にしている

菜花ロイド側（推論・UI）
	•	やること：
	•	入力A/Bを受け取る
	•	A/Bそれぞれを タグ推定（単語検索）
	•	タグが妥当なら、心理テストで得た重みで どちらが菜花っぽいかを判定
	•	判定できない場合は「比較できねぇわ！」で弾く
	•	出力：
	•	UI上で「菜花ロイドが喋る」形式
	•	成功時の語尾は固定：「〜ニダね～」
	•	待機中：「ケツダンニコマリマシタラドウゾ」
	•	比較不可：「比較できねぇわ！」

⸻

なぜ2アプリに分けるのか（メリット）
	•	心理テストは菜花が一度やるだけでよい
→ 以後は暗号を配布すれば、菜花ロイド側は何回でも推論できる
	•	菜花ロイドはサーバ不要・通信不要
→ GitHub Pages（静的ホスティング）だけで動作し、推論は端末内完結
	•	菜花の回答内容を生で配らない
→ 配布するのは暗号文字列のみ。第三者が見ても意味が分からない

⸻

例：実際にどう決まるか（わかりやすい例）

例1：食の決断（比較できる）

入力：
	•	A：二郎
	•	B：家系

処理：
	1.	菜花ロイドはA/Bからタグを推定
	•	二郎 → heavy_meal（ガッツリ）
	•	家系 → heavy_meal（こってり）
	2.	両方とも同じドメイン（food）なので比較OK
	3.	菜花モデル（心理テストで得た重み）でスコア計算
	4.	より菜花っぽい方を出す

表示（例）：
	•	「家系がいいと思うニダね～」
	•	画像：img/nabana/ からランダムに菜花ロイドが表示される

⸻

例2：旅行の決断（比較できる）

入力：
	•	A：温泉旅館（高いけど設備良い）
	•	B：ビジホ（安い）

処理：
	1.	温泉旅館 → luxury, facility, rest あたりが上位
	2.	ビジホ → cheap, location あたりが上位
	3.	同じ旅行領域として比較OK（money/rest系で近い）
	4.	菜花モデルが「節約寄り」ならB、「ご褒美寄り」ならAが出る

表示（例）：
	•	「温泉旅館がいいと思うニダね～」

⸻

例3：ジャンル違い（比較不可）

入力：
	•	A：飛行機
	•	B：坦々麺

処理：
	1.	飛行機 → move 系
	2.	坦々麺 → food 系
	3.	ドメインが違いすぎるため比較不可

表示：
	•	「比較できねぇわ！」
	•	画像：怒り用（img/angry/）を表示

⸻

まとめ（心理テストと菜花ロイドの関係）
	•	心理テスト：菜花の意思決定傾向を学習し、モデル（重み）を作って暗号として出力
	•	菜花ロイド：暗号からモデルを復号し、入力A/Bをタグ推定して“菜花っぽい選択”を推論する
	•	2つを分けることで、「一度のテストで何度でも使える」「通信不要」「回答内容の秘匿」が成立する

┌──────────────────────────────┐
│ ① 心理テスト（菜花モデル生成）      │
│  - 菜花が1500問回答             │
│  - 回答→特徴量(タグ)に集計        │
│  - タグの重み(w) + バイアス(b)    │
│  - それを暗号化して文字列出力       │
└───────────────┬──────────────┘
                │  出力：暗号文字列（数字とドットのみ）
                │  例） 1.00... .00... .00...
                ▼
         (LINEで星野に送る)
                ▼
┌──────────────────────────────┐
│ ② 菜花ロイド（推論・UI）          │
│  - 星野が暗号を /model/ に貼る   │
│  - 端末内で復号→モデル保存        │
│  - A/B入力→タグ推定→推論→決断     │
│  - 比較不可なら怒り表示           │
└──────────────────────────────┘

※サーバ不要：GitHub Pagesの静的配信のみ
※推論はすべて端末内で完結

-------------------